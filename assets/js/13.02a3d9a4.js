(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{363:function(t,n,e){"use strict";e.r(n);var s=e(25),a=Object(s.a)({},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"centos7-nginx-설치하기"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#centos7-nginx-설치하기"}},[t._v("#")]),t._v(" [CentOS7] nginx 설치하기")]),t._v(" "),e("div",{staticStyle:{"font-size":"15px","text-align":"right"}},[e("span",{staticStyle:{"font-weight":"bold"}},[t._v("작성자 : 막내뤼👍")])]),t._v(" "),e("blockquote",[e("p",[t._v("yum명령어를 이용한 설치방법과 압축된 파일을 컴파일해 설치하는 방법을 알아보자")])]),t._v(" "),e("ul",[e("li",[t._v("yum 명령어를 이용한 자동 설치 ( "),e("strong",[t._v("root 계정")]),t._v(" )")]),t._v(" "),e("li",[t._v("압축파일을 다운받아 원하는 경로에 설치 ( "),e("strong",[t._v("사용자 계정")]),t._v(" )")])]),t._v(" "),e("h2",{attrs:{id:"nginx-설치-확인"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx-설치-확인"}},[t._v("#")]),t._v(" nginx 설치 확인")]),t._v(" "),e("pre",[e("code",[t._v("nginx -v")])]),t._v(" "),e("p",[e("strong",[t._v("설치된 경우")])]),t._v(" "),e("blockquote",[e("pre",[e("code",[t._v("nginx version: nginx/[해당버전]")])])]),t._v(" "),e("p",[e("strong",[t._v("설치가 되지 않은 경우")])]),t._v(" "),e("blockquote",[e("pre",[e("code",[t._v("-bash: nginx: command not found")])])]),t._v(" "),e("p",[t._v("설치가 되지 않은 경우 해당 게시글을 보며 nginx설치를 따라해보자.")]),t._v(" "),e("h2",{attrs:{id:"설치"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#설치"}},[t._v("#")]),t._v(" 설치")]),t._v(" "),e("h3",{attrs:{id:"_1-yum-명령어를-이용한-자동설치"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-yum-명령어를-이용한-자동설치"}},[t._v("#")]),t._v(" 1. yum 명령어를 이용한 자동설치")]),t._v(" "),e("h4",{attrs:{id:"_1-1-yum-저장소에-nginx-추가"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-yum-저장소에-nginx-추가"}},[t._v("#")]),t._v(" 1.1 yum 저장소에 nginx 추가")]),t._v(" "),e("p",[t._v("nginx는 yum 저장소에 없기 때문에 파일을 추가 해야한다.")]),t._v(" "),e("pre",[e("code",[t._v("cd /etc/yum.repos.d\n\nvi nginx.repo\n")])]),t._v(" "),e("pre",[e("code",[t._v("[nginx]\nname=nginx repo\nbaseurl=http://nginx.org/packages/centos/7/$basearch/\ngpgcheck=0\nenabled=1")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("baseurl의 경우 해당 os와 버전에 맞춰 작성하면 된다.")])]),t._v(" "),e("p",[t._v("제대로 yum저장소에 등록이 되었는지 확인해보자.\n"),e("pre",[e("code",[t._v("yum info nginx")])]),t._v("\n잘 되었는 경우 다음과 같이 나온다.\n"),e("pre",[e("code",[t._v("Available Packages\nName  : nginx\nArch  : x86_64\nEpoch : 1\nVersion : 1.18.0\nRelease : 2.el7.ngx\n(생략)")])])]),t._v(" "),e("h4",{attrs:{id:"_1-2-nginx-설치"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-nginx-설치"}},[t._v("#")]),t._v(" 1.2 nginx 설치")]),t._v(" "),e("pre",[e("code",[t._v("yum install -y nginx")])]),t._v(" "),e("ul",[e("li",[t._v("설치 경로는 /etc/nginx 이다.")])]),t._v(" "),e("h4",{attrs:{id:"_1-3-nginx-실행"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-nginx-실행"}},[t._v("#")]),t._v(" 1.3 nginx 실행")]),t._v(" "),e("pre",[e("code",[t._v("systemctl start nginx")])]),t._v(" "),e("h3",{attrs:{id:"_2-wget-혹은-ftp을-이용한-수동-설치"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-wget-혹은-ftp을-이용한-수동-설치"}},[t._v("#")]),t._v(" 2. wget 혹은 FTP을 이용한 수동 설치")]),t._v(" "),e("h4",{attrs:{id:"_2-1-nginx-설치"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-nginx-설치"}},[t._v("#")]),t._v(" 2.1 nginx 설치")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://nginx.org/en/download.html"}},[t._v("nginx 다운로드")]),t._v(" "),e("br"),e("a",{attrs:{href:"https://zlib.net/"}},[t._v("zlib 다운로드")])])]),t._v(" "),e("p",[t._v("FTP 혹은 wget을 이용하여 파일을 다운로드 받는다.")]),t._v(" "),e("pre",[e("code",[t._v("wget https://nginx.org/download/nginx-1.18.0.tar.gz\nwget https://zlib.net/zlib-1.2.11.tar.gz")])]),t._v(" "),e("pre",[e("code",[t._v("tar -xvf nginx-1.18.0.tar.gz\ntar -xvf zlib-1.2.11.tar.gz\ncd nginx-1.18.0\n")])]),t._v(" "),e("pre",[e("code",[t._v("./configure --prefix=[설치경로] --with-zlib=../zlib-1.2.11\nmake\nmake install")])]),t._v(" "),e("h4",{attrs:{id:"_2-2-nginx-실행"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-nginx-실행"}},[t._v("#")]),t._v(" 2.2 nginx 실행")]),t._v(" "),e("pre",[e("code",[t._v("vi [설치경로]/conf/nginx.conf")])]),t._v(" "),e("pre",[e("code",[t._v("user  [실행할 유저];\nworker_processes  1;")])]),t._v(" "),e("pre",[e("code",[t._v("cd ../sbin/\n./nginx\n./nginx -s stop //종료")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v('nginx로 reverse proxy 를 사용할 때, 용량이 큰 파일을 업로드하면 "413 Request Entity Too Large" 라는 메시지를 볼 수 있다.\n'),e("pre",[e("code",[t._v("vi [설치경로]/conf/nginx.conf")])]),t._v(" "),e("pre",[e("code",[t._v("http {\nclient_max_body_size [용량];\n...\n}")])]),t._v("\n기본은 1M으로 무제한으로 설정하고 싶다면 0으로 설정하면 된다.")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("h4",{attrs:{id:"_2-2-1-systemctl-등록"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-systemctl-등록"}},[t._v("#")]),t._v(" 2.2.1 systemctl 등록")]),t._v(" "),e("pre",[e("code",[t._v("cd /usr/lib/systemd/system\nvi nginx.service\n")])]),t._v(" "),e("pre",[e("code",[t._v("[Unit]\nDescription=The NGINX HTTP and reverse proxy server\nAfter=syslog.target network.target remote-fs.target nss-lookup.target\n\n[Service]\nType=forking\nPIDFile=/run/nginx.pid\nExecStartPre=[설치경로]/sbin/nginx -t\nExecStart=[설치경로]/sbin/nginx\nExecReload=[설치경로]/sbin/nginx -s reload\nExecStop=/bin/kill -s QUIT $MAINPID\nPrivateTmp=true\n[Install]\nWantedBy=multi-user.target\n")])]),t._v(" "),e("p",[t._v("systemctl  daemon을 재시작한 후 상태를 확인해준다.\n"),e("pre",[e("code",[t._v("systemctl daemon-reload\nsystemctl status nginx\n")])])])]),t._v(" "),e("h2",{attrs:{id:"nginx-톰캣-연동"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx-톰캣-연동"}},[t._v("#")]),t._v(" nginx 톰캣 연동")]),t._v(" "),e("h3",{attrs:{id:"_3-nginx-tomcat-연동"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-nginx-tomcat-연동"}},[t._v("#")]),t._v(" 3. nginx + Tomcat 연동")]),t._v(" "),e("h4",{attrs:{id:"_3-1-nginx-설정"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-nginx-설정"}},[t._v("#")]),t._v(" 3.1 nginx 설정")]),t._v(" "),e("pre",[e("code",[t._v("vi  [설치경로]/conf/nginx.conf\n")])]),t._v(" "),e("pre",[e("code",[t._v("server {\nlisten 80;\nserver_name localhost;\n\n#charset koi8-r;\n#access_log /var/log/nginx/host.access.log main;\n\nlocation / {\nroot /usr/share/nginx/html;\nindex index.html index.htm;\nproxy_pass http://localhost:8090;\n}\n(생략)\n")])]),t._v(" "),e("h4",{attrs:{id:"_3-2-tomcat-설정"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-tomcat-설정"}},[t._v("#")]),t._v(" 3.2 tomcat 설정")]),t._v(" "),e("p",[t._v("tomcat의 server.xml에서 파일이 시작할 경로를 잡아준다.\n"),e("pre",[e("code",[t._v('Context path="" docBase="/APP/jiniworks_cms" debug="0" reloadable="false" URIEncoding="utf-8" /\n')])])]),t._v(" "),e("h4",{attrs:{id:"_3-3-서버-재시작"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-서버-재시작"}},[t._v("#")]),t._v(" 3.3 서버 재시작")]),t._v(" "),e("pre",[e("code",[t._v("systemctl restart nginx")])])])}),[],!1,null,null,null);n.default=a.exports}}]);