(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{357:function(s,a,t){"use strict";t.r(a);var r=t(25),e=Object(r.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"apache-수동설치-tomcat-연동-mod-jk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#apache-수동설치-tomcat-연동-mod-jk"}},[s._v("#")]),s._v(" Apache 수동설치 + Tomcat 연동(mod_jk)")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("root 계정이 아닌 사용자계정으로 Apache 를 설치하고 서비스하는 가이드를 기술한다.")])])]),s._v(" "),t("h2",{attrs:{id:"_1-apache-와-tomcat-을-연동하는-이유"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-apache-와-tomcat-을-연동하는-이유"}},[s._v("#")]),s._v(" 1. Apache 와 Tomcat 을 연동하는 이유?")]),s._v(" "),t("blockquote",[t("p",[s._v("Apache 는 외부에서 HTTP프로토콜의 호출이 오면 설정에 따라 웹 페이지를 전송.\n단순 이미지 파일이나 정적 데이터를 처리 하기에 최적화\n그러나 JSP/PHP 같은 동적페이지 처리에는 TOMCAT 이 적합")])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[t("RouterLink",{attrs:{to:"/guide/tomcat.html"}},[s._v("Tomcat 설치 가이드 바로가기")])],1)]),s._v(" "),t("h2",{attrs:{id:"_2-apache-설치"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-apache-설치"}},[s._v("#")]),s._v(" 2. Apache 설치")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("추가 패키지 설치 및 권한 설정등의 작업이 있으므로 root 계정으로 설치 후 사용자 계정으로 권한 변경")])]),s._v(" "),t("h3",{attrs:{id:"_2-1-설치파일-다운로드"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-설치파일-다운로드"}},[s._v("#")]),s._v(" 2.1 설치파일 다운로드")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://apr.apache.org/download.cgi",target:"_blank",rel:"noopener noreferrer"}},[s._v("apr 최신버전 확인"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://apr.apache.org/download.cgi",target:"_blank",rel:"noopener noreferrer"}},[s._v("apr-util 최신버전 확인"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://ftp.pcre.org/pub/pcre/",target:"_blank",rel:"noopener noreferrer"}},[s._v("pcre 최신버전 확인"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"http://httpd.apache.org/download.cgi",target:"_blank",rel:"noopener noreferrer"}},[s._v("httpd 최신버전 확인"),t("OutboundLink")],1)])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc gcc-c++ httpd-devel\n")])])]),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pwd")]),s._v("\n/home/cms/\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" apache2    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("-- 아파치 설치폴더"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("사용자 Home "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ex./home/cms "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" APP        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("-- 유틸설치 및 다운로드\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" APP\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://mirror.apache-kr.org/httpd/httpd-2.4.46.tar.gz\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://mirror.apache-kr.org/apr/apr-1.6.5.tar.gz\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://apache.mirror.cdnetworks.com/apr/apr-util-1.6.1.tar.gz\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://ftp.pcre.org/pub/pcre/pcre-8.41.tar.gz\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf httpd-2.4.46.tar.gz\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf apr-1.6.5.tar.gz\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf apr-util-1.6.1.tar.gz\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf pcre-8.41.tar.gz\n")])])]),t("h3",{attrs:{id:"_2-2-설치"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-설치"}},[s._v("#")]),s._v(" 2.2 설치")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("--prefix 경로가 실제 설치경로와 일치하도록!!")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /APP/apr-1.6.5\n$ ./configure --prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/APP/apr-1.6.5\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /APP/apr-util-1.6.1\n$ ./configure --prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/APP/apr-util-1.6.1 --with-apr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/APP/apr-1.6.5\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /APP/pcre-8.41\n$ ./configure --prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/APP/apr-util-1.6.1 --with-apr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/APP/apr-1.6.5\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("--prefix=/APP/apache2 이전에 생성한 Apache 설치 경로")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /APP/httpd-2.4.46\n$ ./configure --prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/APP/apache2 --enable-modules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("most --enable-mods-shared"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("all --enable-so --with-apr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/APP/apr-1.6.5 --with-apr-util"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/APP/apr-util-1.6.1\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("Error : pcre-config for libpcre not found 관련 에러 발생시  "),t("br")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pcre-devel -y\n")])])])]),s._v(" "),t("h3",{attrs:{id:"_2-3-실행"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-실행"}},[s._v("#")]),s._v(" 2.3 실행")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("root 계정으로 다운로드 및 설치했을 경우 폴더 권한을 확인하여 사용자 권한으로 바꿔준다 "),t("br"),s._v("\n사용자 계정은 cms 라고 할때 ( root 계정)")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/cms  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("-- 사용자 홈으로 이동\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -al\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\ndrwxr-xr-x.   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" root  root   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v(" Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":23 APP\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])])]),t("p",[s._v("위와같이 root로 폴더 권한일 경우")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R cms:cms APP\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -al \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\ndrwxr-xr-x.   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" cms  cms   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v(" Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":23 APP\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])])])]),s._v(" "),t("ul",[t("li",[s._v("사용자 계정으로 전환 후")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /APP/apache2/bin\n$ ./httpd -k start \n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("Permission denied: AH00072: make_sock: could not "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" to address "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("::"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":80\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("Permission denied: AH00072: make_sock: could not "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" to address "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:80\nno listening sockets available, shutting down\n")])])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("1024 이하의 포트는 보안상의 이유로 root 권한을 가지고 있는 프로세스만이 사용할 수 있다.")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" -  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("-- root 계정 전환\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/cms/APP/apache2/bin\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" root:cms httpd\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +s httpd\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 사용자 계정 전환 후 Apache 시작")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - cms \n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /APP/apache2/bin\n$ ./httpd -k start \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## localhost 로 접속해서 확인")]),s._v("\n")])])]),t("h3",{attrs:{id:"_2-4-서비스-등록"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-서비스-등록"}},[s._v("#")]),s._v(" 2.4 서비스 등록")]),s._v(" "),t("blockquote",[t("p",[s._v("서버재기동시에 자동으로 서비스 올라오도록 서비스에 등록")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#### root 계정")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /APP/apache2/bin/apachectl /etc/init.d/httpd\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --add httpd\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###### Error 발생시 ###########")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/init.d/httpd\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("######### $!/bin/sh 아래에 5줄 추가/자신의 설치경로로 수정")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("/bin/sh    \n\n chkconfig: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2345")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),s._v("\n description: init "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Apache server daemon\n processname: /APP/apache2/bin/apachectl\n config: /APP/apache2/conf/httpd.conf\n pidfile: /APP/apache2/logs/httpd.pid\n\n:wq \n\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --add httpd\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#############################")]),s._v("\n\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --list "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" httpd\n\nNote: This output shows SysV services only and does not include native\n      systemd services. SysV configuration data might be overridden by native\n      systemd configuration.\n\n      If you want to list systemd services use "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'systemctl list-unit-files'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n      To see services enabled on particular target use\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'systemctl list-dependencies [target]'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n\nhttpd           "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":off   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":off   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":on    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":on    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":on    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(":on    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(":off\n\n")])])]),t("h2",{attrs:{id:"_3-apache-tomcat-연동"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-apache-tomcat-연동"}},[s._v("#")]),s._v(" 3. Apache + Tomcat 연동")]),s._v(" "),t("h3",{attrs:{id:"_3-1-tomcat-connector-설치"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-tomcat-connector-설치"}},[s._v("#")]),s._v(" 3.1 Tomcat Connector 설치")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[t("a",{attrs:{href:"http://apache.tt.co.kr/tomcat/tomcat-connectors/jk/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Tomcat-Connector 최선버전 다운로드"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("로컬에 다운로드 받고 FTP로 서버에 업로드 하거나, 다운로드 링크를 복사해서 서버에서 바로 다운로드 받아도된다.\n해당 가이드는 서버에서 직접 다운로드 받는 방법을 사용")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#### root 계정으로 진행 ######### ")]),s._v("\n\n$ yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc gcc-c++     \n\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/cms/APP\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://apache.tt.co.kr/tomcat/tomcat-connectors/jk/tomcat-connectors-1.2.48-src.tar.gz\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf tomcat-connectors-1.2.46-src.tar.gz\n\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" tomcat-connectors-1.2.46-src/native/\n$ ./configure --with-apxs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/cms/APP/apache2/bin/apxs\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("Redhat 의 경우 오류날 경우")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n$ dnf "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" redhat-rpm-config\n")])])])]),s._v(" "),t("h3",{attrs:{id:"_3-2-apache-설정파일-수정"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-apache-설정파일-수정"}},[s._v("#")]),s._v(" 3.2 Apache 설정파일 수정")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("mod_jk.conf 파일 생성 ( * 자동설치와 다름 )")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /home/cms/APP/apache2/conf/mod_jk.conf\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("IfModule jk_module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   JkWorkersFile /home/cms/APP/apache2/conf/workers.properties\n   JkLogFile /home/cms/LOG/apache2/mod_jk.log   \n   JkLogLevel info\n   JkLogStampFormat "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[%a %b %d %H:%M:%S %Y]"')]),s._v("\n   JkMount /* loadbalancer\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/IfModule"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /home/cms/APP/apache2/conf/httpd.conf\n\n/LoadModule      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("-- 해당 단어 검색후 뒤에 아래 내용 추가\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## ------------------------")]),s._v("\nLoadModule jk_module modules/mod_jk.so\n\ninclude conf/mod_jk.conf\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## ------------------------")]),s._v("\n")])])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("설정내용은 WEB1-WAS1 / WEB2-WAS2 구성의 예로 작성되어 있으며 각 프로젝트 환경에 맞는 설정으로 수정 후 적용")])]),s._v(" "),t("h4",{attrs:{id:"_3-2-1-이중화-구성시"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-이중화-구성시"}},[s._v("#")]),s._v(" 3.2.1 이중화 구성시")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /home/cms/APP/apache2/conf/workers.properties\n\nworker.list"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("loadbalancer\n\nworker.loadbalancer.type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("lb\nworker.loadbalancer.balanced_workers"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("worker1,worker2\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#worker.loadbalancer.balanced_workers=worker2")]),s._v("\nworker.loadbalancer.sticky_session"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\nworker.worker1.type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ajp13\nworker.worker1.host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.69\nworker.worker1.port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8010")]),s._v("\nworker.worker1.lbfactor"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\nworker.worker2.type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ajp13\nworker.worker2.host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.70\nworker.worker2.port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8010")]),s._v("\nworker.worker2.lbfactor"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("type과 port 속성은 Tomcat의 server.xml 설정을 참조합니다.\n3.4 Tomcat 설정 참조!")])]),s._v(" "),t("h4",{attrs:{id:"_3-2-2-web-was-단독-서버-구성시"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-web-was-단독-서버-구성시"}},[s._v("#")]),s._v(" 3.2.2 WEB-WAS 단독 서버 구성시")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /home/cms/APP/apache2/conf/httpd.conf\n\n/DocumentRoot       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("-- 검색하고\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Tomcat 의 경로와 맞춰준다")]),s._v("\nDocumentRoot "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/home/cms/apache-tomcat-8.5.57/webapps/ROOT"')]),s._v("\n\n")])])]),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /home/cms/APP/apache2/conf/workers.properties\n\nworker.list"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("loadbalancer\n\nworker.loadbalancer.type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("lb\nworker.loadbalancer.balanced_workers"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("worker1\nworker.loadbalancer.sticky_session"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\nworker.worker1.type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ajp13\nworker.worker1.host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("localhost\nworker.worker1.port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8010")]),s._v("\nworker.worker1.lbfactor"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("h4",{attrs:{id:"_3-2-3-web1-was1-설정-참조-분리구성"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-3-web1-was1-설정-참조-분리구성"}},[s._v("#")]),s._v(" 3.2.3 WEB1-WAS1 설정 참조 (분리구성)")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /home/cms/APP/apache2/conf/workers.properties\n\nworker.list"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("loadbalancer\n\nworker.loadbalancer.type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("lb\nworker.loadbalancer.balanced_workers"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("worker1\nworker.loadbalancer.sticky_session"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\nworker.worker1.type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ajp13\nworker.worker1.host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.69\nworker.worker1.port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8010")]),s._v("\nworker.worker1.lbfactor"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("h4",{attrs:{id:"_3-2-4-web2-was2-설정-참조-분리구성"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-4-web2-was2-설정-참조-분리구성"}},[s._v("#")]),s._v(" 3.2.4 WEB2-WAS2 설정 참조 (분리구성)")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /home/cms/APP/apache2/conf/workers.properties\n\nworker.list"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("loadbalancer\n\nworker.loadbalancer.type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("lb\nworker.loadbalancer.balanced_workers"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("worker2\nworker.loadbalancer.sticky_session"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\nworker.worker2.type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ajp13\nworker.worker2.host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".106.70\nworker.worker2.port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8010")]),s._v("\nworker.worker2.lbfactor"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n")])])]),t("h3",{attrs:{id:"_3-3-apache-재시작"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-apache-재시작"}},[s._v("#")]),s._v(" 3.3 Apache 재시작")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /APP/apache2/bin\n$ ./httpd -k restart \n")])])]),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("아래와 같은 에러발생시")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("SELinux policy enabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" httpd running as context system_u:system_r:httpd_t:s0\nAH01232: suEXEC mechanism enabled "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("wrapper: /usr/sbin/suexec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("Permission denied: mod_jk: could not "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" JkLog "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" /etc/httpd/mod_jk.log\nAH00016: Configuration Failed\n\n$ setenforce "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("--- Selinux 중지\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/sysconfig/selinux     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("-- 서버 재시작시에도 사용안함 설정\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SELINUX")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("disabled \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])])])]),s._v(" "),t("h3",{attrs:{id:"_3-4-tomcat-server-xml-설정"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-tomcat-server-xml-설정"}},[s._v("#")]),s._v(" 3.4 Tomcat-server.xml 설정")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v('AJP 설정 부분 주석 해제하고 Tomcat8.5 이상 버전일 경우  secretRequired="false" 속성을 추가\nworkers.properties 에서 설정한 포트와 같은 포트값으로 적용')])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("-- Define an AJP "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),s._v(" Connector on port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8009")]),s._v(" --"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Connector "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("protocol")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AJP/1.3"')]),s._v("\n               "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("address")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0"')]),s._v("\n               "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8010"')]),s._v("\n               "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("secretRequired")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"false"')]),s._v("\n               "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("redirectPort")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8443"')]),s._v(" /"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n               \n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Context "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("docBase")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/APP/jiniworks_cms"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("debug")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("reloadable")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"false"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("URIEncoding")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"utf-8"')]),s._v(" /"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n               \n               \n")])])]),t("p",[s._v("Tomcat 재시작 후 웹서버 IP로 확인")])])}),[],!1,null,null,null);a.default=e.exports}}]);