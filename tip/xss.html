<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>(보안취약점) XSS 공격 | Jiniworks Knowledge Base</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="JiniWorks Dev.">
    <meta name="robots" content="noindex">
    <link rel="preload" href="/assets/css/0.styles.44fe5b27.css" as="style"><link rel="preload" href="/assets/js/app.65a287af.js" as="script"><link rel="preload" href="/assets/js/2.111a4501.js" as="script"><link rel="preload" href="/assets/js/19.e549a00f.js" as="script"><link rel="prefetch" href="/assets/js/10.0ad79967.js"><link rel="prefetch" href="/assets/js/11.89901c01.js"><link rel="prefetch" href="/assets/js/12.0215382e.js"><link rel="prefetch" href="/assets/js/13.02a3d9a4.js"><link rel="prefetch" href="/assets/js/14.3b4f13aa.js"><link rel="prefetch" href="/assets/js/15.d1739417.js"><link rel="prefetch" href="/assets/js/16.9620fdd6.js"><link rel="prefetch" href="/assets/js/17.ce95e47e.js"><link rel="prefetch" href="/assets/js/18.bbcd404d.js"><link rel="prefetch" href="/assets/js/3.989737ef.js"><link rel="prefetch" href="/assets/js/4.38c01414.js"><link rel="prefetch" href="/assets/js/5.61f8d686.js"><link rel="prefetch" href="/assets/js/6.4db2969a.js"><link rel="prefetch" href="/assets/js/7.ae5c14d4.js"><link rel="prefetch" href="/assets/js/8.f6babcac.js"><link rel="prefetch" href="/assets/js/9.0fecb39f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.44fe5b27.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Jiniworks Knowledge Base</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="설치" class="dropdown-title"><span class="title">설치</span> <span class="arrow down"></span></button> <button type="button" aria-label="설치" class="mobile-dropdown-title"><span class="title">설치</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/jdk.html" class="nav-link">
  openJDK
</a></li><li class="dropdown-item"><!----> <a href="/guide/tomcat.html" class="nav-link">
  Tomcat
</a></li><li class="dropdown-item"><!----> <a href="/guide/apache.html" class="nav-link">
  [자동]Apache + Tomcat
</a></li><li class="dropdown-item"><!----> <a href="/guide/apache2.html" class="nav-link">
  [수동]Apache + Tomcat
</a></li><li class="dropdown-item"><!----> <a href="/guide/apache-ssl.html" class="nav-link">
  Apache SSL 설치
</a></li><li class="dropdown-item"><!----> <a href="/guide/nginx.html" class="nav-link">
  NginX + Tomcat
</a></li><li class="dropdown-item"><!----> <a href="/guide/nas.html" class="nav-link">
  NAS 설정
</a></li><li class="dropdown-item"><!----> <a href="/guide/auto-server.html" class="nav-link">
  서버재부팅시 Tomcat 자동시작설정
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CMS" class="dropdown-title"><span class="title">CMS</span> <span class="arrow down"></span></button> <button type="button" aria-label="CMS" class="mobile-dropdown-title"><span class="title">CMS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cms/login.html" class="nav-link">
  로그인 연동 가이드
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DataBase" class="dropdown-title"><span class="title">DataBase</span> <span class="arrow down"></span></button> <button type="button" aria-label="DataBase" class="mobile-dropdown-title"><span class="title">DataBase</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/oracle-cursor.html" class="nav-link">
  Oracle 프로시저 커서
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="TIP" class="dropdown-title"><span class="title">TIP</span> <span class="arrow down"></span></button> <button type="button" aria-label="TIP" class="mobile-dropdown-title"><span class="title">TIP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tip/network.html" class="nav-link">
  내부망에 연결된 PC에서 외부망 연결
</a></li><li class="dropdown-item"><!----> <a href="/tip/xss.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  (보안취약점) XSS 공격
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="설치" class="dropdown-title"><span class="title">설치</span> <span class="arrow down"></span></button> <button type="button" aria-label="설치" class="mobile-dropdown-title"><span class="title">설치</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/jdk.html" class="nav-link">
  openJDK
</a></li><li class="dropdown-item"><!----> <a href="/guide/tomcat.html" class="nav-link">
  Tomcat
</a></li><li class="dropdown-item"><!----> <a href="/guide/apache.html" class="nav-link">
  [자동]Apache + Tomcat
</a></li><li class="dropdown-item"><!----> <a href="/guide/apache2.html" class="nav-link">
  [수동]Apache + Tomcat
</a></li><li class="dropdown-item"><!----> <a href="/guide/apache-ssl.html" class="nav-link">
  Apache SSL 설치
</a></li><li class="dropdown-item"><!----> <a href="/guide/nginx.html" class="nav-link">
  NginX + Tomcat
</a></li><li class="dropdown-item"><!----> <a href="/guide/nas.html" class="nav-link">
  NAS 설정
</a></li><li class="dropdown-item"><!----> <a href="/guide/auto-server.html" class="nav-link">
  서버재부팅시 Tomcat 자동시작설정
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CMS" class="dropdown-title"><span class="title">CMS</span> <span class="arrow down"></span></button> <button type="button" aria-label="CMS" class="mobile-dropdown-title"><span class="title">CMS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cms/login.html" class="nav-link">
  로그인 연동 가이드
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DataBase" class="dropdown-title"><span class="title">DataBase</span> <span class="arrow down"></span></button> <button type="button" aria-label="DataBase" class="mobile-dropdown-title"><span class="title">DataBase</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/oracle-cursor.html" class="nav-link">
  Oracle 프로시저 커서
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="TIP" class="dropdown-title"><span class="title">TIP</span> <span class="arrow down"></span></button> <button type="button" aria-label="TIP" class="mobile-dropdown-title"><span class="title">TIP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tip/network.html" class="nav-link">
  내부망에 연결된 PC에서 외부망 연결
</a></li><li class="dropdown-item"><!----> <a href="/tip/xss.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  (보안취약점) XSS 공격
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>(보안취약점) XSS 공격</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tip/xss.html#xss란" class="sidebar-link">XSS란</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/tip/xss.html#공격" class="sidebar-link">공격</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/tip/xss.html#피해" class="sidebar-link">피해</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/tip/xss.html#공격예시" class="sidebar-link">공격예시</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/tip/xss.html#해결방안" class="sidebar-link">해결방안</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="보안취약점-xss-공격"><a href="#보안취약점-xss-공격" class="header-anchor">#</a> (보안취약점) XSS 공격</h1> <div style="font-size:15px;text-align:right;"><span style="font-weight:bold;">작성자 : 린주임👻</span></div> <h2 id="xss란"><a href="#xss란" class="header-anchor">#</a> XSS란</h2> <p>&quot;게시판, 웹 메일 등에 삽입된 악의적인 스크립트에 의해 페이지가 깨지거나 다른 사용자의 사용을 방해하거나 쿠키 및 기타 개인 정보를 특정 사이트로 전송시키는 공격.&quot; (출처 네이버 지식백과)</p> <blockquote><p>XSS 공격은 웹사이트 관리자가 아닌 이가 웹페이지에 악성 스크립트를 삽입할 수 있는 취약점이다.
이 취약점은 웹 응용프로그램이 <strong>사용자로부터 입력 받은 값을</strong> 제대로 검사하지 않고 사용할 경우 나타나며, 사용자의 정보인 '쿠키',  '세션' 등을 탈취하거나, 자동으로 비정상적인 기능을 수행하게 할 수 있다.
다른 웹사이트와 정보를 교환하는 식으로 작동하므로 <strong>사이트 간 스크립팅</strong>이라고도 한다.
주로 <strong>사용자의 입력을 받아 동적으로 HTML을 조작하는 웹 어플리케이션이 주요 공격 대상</strong>이 된다.
예를 들어 악성 코드가 포함된 글을 읽는 순간 악성 프로그램이 설치되거나 쿠키 혹은 세션 정보가 공격자에게 전송되어 이를 악용하게 된다.</p></blockquote> <br> <h2 id="공격"><a href="#공격" class="header-anchor">#</a> 공격</h2> <ol><li><strong>저장 XSS 공격</strong> (Stored XSS 취약점)</li></ol> <p>저장 XSS 공격은 웹 애플리케이션 취약점이 있는 웹 서버에 악성 스크립트를 영구적으로 저장해 놓는 방법이다. 이 때 웹 사이트의 게시판, 사용자 프로필 및 코멘트 필드 등에 악성 스크립트를 삽입해 놓으면, 사용자가 사이트를 방문하여 저장되어 있는 페이지에 정보를 요청할 때, 서버는 악성 스크립트를 사용자에게 전달하여 사용자 브라우저에서 스크립트가 실행되면서 공격한다.</p> <p>: 사용자 입력값이 DB에 저장되고 다시 출력되는 것</p> <p><img src="https://1.bp.blogspot.com/-iiiAwUQ2-sA/WXf-2emi8XI/AAAAAAAABx8/uSKbBXbfYho2dwyom9eB9v36StbaFcOzQCLcBGAs/s1600/stored.JPG" alt=""></p> <br> <br> <ol start="2"><li><strong>반사 XSS 공격</strong></li></ol> <p>반사식 XSS 공격은 웹 애플리케이션의 지정된 변수를 이용할 때 발생하는 취약점을 이용하는 것으로, <strong>검색 결과, 에러 메시지 등 서버가 외부에서 입력받은 값을 받아 브라우저에게 응답할 때 전송하는 과정에서</strong> 입력되는 변수의 위험한 문자를 사용자에게 그대로 돌려주면서 발생한다.</p> <p>일반적으로 서버에 검색 내용을 입력하면, 검색 결과가 있는 경우에는 결과 값을 사용자에게
전달하지만, [예시1]과 같이 서버에서 정확한 결과가 없는 경우 서버는 브라우저에 입력한 값을
[예시 2]과 같이 그대로 HTML 문서에 포함하여 응답한다.</p> <p>이 경우 HTML 페이지에 포함된 악성
스크립트가 브라우저에서 실행이 된다.</p> <p>: 사용자 입력 값이 웹 화면에 바로 출력 되는 것</p> <blockquote><p>예시1</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>http://www.testXSS/search_result.do?srSearchVal=&lt;script&gt;alert(&quot;XSS&quot;);&lt;/script&gt;
</code></pre></div><blockquote><p>예시2</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>&lt;html&gt;
	&lt;body&gt;
		&lt;div id=&quot;pageTitleTxt&quot;&gt;
		&lt;input type=&quot;text&quot; id=&quot;search_val&quot; name=&quot;srSearchVal&quot; 
		value=&quot;&lt;script&gt;alert(&quot;XSS&quot;);&lt;/script&gt;&quot; placeholder=&quot;검색어를 입력해 주세요&quot; /&gt;
	&lt;/body&gt;
&lt;/html&gt;
</code></pre></div><p><img src="https://1.bp.blogspot.com/-FrvvJGR8JEo/WXf-myPRdbI/AAAAAAAABx4/cnFulUUI7KAW-Q3Q2NNONs6s22I6rowCgCLcBGAs/s1600/reflext.JPG" alt=""></p> <br> <br> <ol start="3"><li><strong>DOM 기반 XSS 공격</strong></li></ol> <p>DOM 기반 XSS 공격은 DOM 객체를 포함하는 자바스크립트 등을 이용하여 DOM(Document Object Model) 데이터 접근 시 검증되지 않은 입력 값이 자바 스크립트를 통해 삽입되어 발생한다.</p> <p><img src="https://3.bp.blogspot.com/-CqkXuOTZ-as/WXf-fQyfqbI/AAAAAAAABx0/betiJVFVXFMj5nrJ2bEwdsCgY2u32JpTQCLcBGAs/s1600/dom2.JPG" alt=""></p> <br> <h2 id="피해"><a href="#피해" class="header-anchor">#</a> 피해</h2> <ul><li><strong>쿠키 / 세션 ID 정보 탈취</strong></li></ul> <p>쿠키란 사용자가 웹 사이트를 이용하는 동안 사용자 브라우저에 저장되는 것으로, 세션 쿠키는 사용자가 웹사이트를 읽거나 방문하는 동안에만 임시로 메모리에 존재하는 쿠키이다. 보통 브라우저에서는 사용자가 브라우저를 종료하면 세션 쿠키를 삭제한다.</p> <p>웹 애플리케이션이 사용자의 세션 ID를 쿠키에 포함하는 경우 XSS 공격을 통해, 합법적인 세션 ID를 획득하여 불법적으로 정상 사용자로 가장할 수 있다.</p> <br> <ul><li><strong>시스템 관리자 권한 탈취</strong></li></ul> <p>XSS 취약점을 이용하여 사용자 브라우저 취약점을 공격하여 PC를 완전히 통제할 수도 있다. 공격자는 XSS 취약점 있는 웹 서버에 다양한 악성 데이터를 포함시켜 놓은 후, 사용자의 브라우저가 악성 데이터를 실행하는 경우 공격자의 브라우저의 취약점을 공격하는 공격 코드가 실행되면서 사용자 시스템을 완전히 통제할 수 있다. 회사 등 조직의 개인의 PC가 해킹되는 경우, 조직의 내부 시스템으로 이동하여 내부의 중요 정보를 탈취하는 공격으로 이어질 수 있다.</p> <br> <br> <h2 id="공격예시"><a href="#공격예시" class="header-anchor">#</a> 공격예시</h2> <p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FccgEwU%2FbtqTlGgr3Hp%2Fy6TTy8KRLJEXw9Ky2mVMq1%2Fimg.png" alt="">
위와 같은 검색 폼에 사용자 입력값을 담아 서버로 보내고, 이 값으로 검색된 결과 페이지를 구성한다.</p> <p>위 예제는 크로스 사이트 스크립팅(XSS)에 대비가 되어 있지 않은 웹 어플리케이션이다.
저 검색 단어 입력칸에 아래와 같은 스크립트를 넣어본다면,</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;script&gt;alert(&quot;XSS&quot;);&lt;/script&gt;
</code></pre></div><p>XSS공격에 대한 대응이 되어 있는 사이트라면  위 스크립트를 넣더라도 그냥 문자열일 뿐이기 때문에 검색어를 입력받을 때와 마찬가지로 화면에 &quot;&lt; script&gt;alert(&quot;XSS&quot;);&lt; /script&gt;&quot; 그대로가 출력 될 것이다.</p> <br>
하지만 아무런 대응이 되어있지 않다면 아래와 같은 결과를 볼 수 있다.
<p><img src="https://blog.kakaocdn.net/dn/cbF9el/btqTjCMtRr5/eK7rqPvtKfqHZITbu9Rn8k/img.png" alt=""></p> <p>팝업 메시지를 띄우는 것은 개발자가 전혀 의도한 기능이 아니지만, 사용자가 임의로 웹 페이지를 조작할 수 있게된다. 위 예시는 단순히 공격자가 만든 스크립트를 실행시키는데 그쳤지만, 응용하면 더 위험한 상황에 다른 사용자들을 노출시킬 수 있다.</p> <p>예를 들어 XSS대응이 되어있지 않은 사이트의 게시판에 공격자가 만들어둔 악성 해킹 사이트로 이동하게끔 하는 스크립트를 삽입하고 사용자를 혹하게 하는 제목의 게시물로 등록한다.</p> <p>일반 사용자는 그 게시물을 클릭하게 되고, 공격자가 삽입한 스크립트가 동작해 악의적인 페이지로 이동하게 된다.</p> <br> <br> <h2 id="해결방안"><a href="#해결방안" class="header-anchor">#</a> 해결방안</h2> <ol><li><strong>문자 치환</strong></li></ol> <p>XSS 는 HTML 태그 문자 '&lt;'와 '&gt;'가 입력되어 실행되는 것이 취약점의 주요한 원인이므로 해당 문자열을 다른 문자열로 치환하여 스크립트가 실행되지 않도록 수정해야 한다.</p> <p>예를 들어, &quot;&lt;&quot; 는 동일한 의미의 HTML &quot;&amp; lt;&quot; 로 변경한다.</p> <p>사용자는 &lt; script&gt; 가 &lt; script&gt; 로 보이지만 HTML 문서에는 &amp; lt;script&amp; gt;로 나타나서
브라우저에서 일반 문자로 인식하고 스크립트로서 실행되지 않는다.</p> <table><thead><tr><th>표현문자  </th> <th>실제표현  </th> <th>설명</th></tr></thead> <tbody><tr><td>&amp;lt;</td> <td>&lt;</td> <td>보다 작은, HTML 코드에서 모든 태그의 시작 기호.</td></tr> <tr><td>&amp;gt;</td> <td>&gt;</td> <td>보다 큰, HTML 코드에서 모든 태그의 끝 기호.</td></tr> <tr><td>&amp;nbsp;</td> <td></td> <td>' ' (공백 문자 한칸, Space 한칸)</td></tr> <tr><td>&amp;amp;</td> <td>&amp;</td> <td>&amp; 문자를 뜻함. AND라는 의미를 포함하여 javascript, java 등에서<br> AND연산기호로 사용됨.</td></tr> <tr><td>&amp;quot;</td> <td>&quot;</td> <td>큰따옴표 하나.</td></tr> <tr><td>&amp;#39;</td> <td>'</td> <td>작은따옴표 하나.</td></tr></tbody></table> <ol start="2"><li><strong>JSTL 라이브러리 이용</strong></li></ol> <p>검색창으로 예를 들어 사용자가 검색 입력값을 담아 서버로 보내고, 이 값으로 검색된 결과 페이지가 JSP페이지로 구성될때, JSTL라이브러리를 통해 방지 할 수 있다.</p> <p>이때 <strong>입력받은 값을 EL표기법으로 결과 페이지에 노출하게 된다면</strong> 스크립트가 실행되는 의도적인 입력값일 경우 스트립트가 발생된다.</p> <p>하지만 <strong>JSTL표기법으로 입력받은 값을 결과 페이지에 노출하게 되면</strong> 스크립트가 실행되는 의도적인 입력값일 경우라도 <strong>스크립트가 실행되지 않는다.</strong></p> <blockquote><p>그렇기 때문에 입력 받은 값을 <strong>&lt; c:out value=/&gt;</strong> 로 감싸주게 되면 의도적인 스크립트가 실행되는 것을 방지할 수 있다.</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.65a287af.js" defer></script><script src="/assets/js/2.111a4501.js" defer></script><script src="/assets/js/19.e549a00f.js" defer></script>
  </body>
</html>
